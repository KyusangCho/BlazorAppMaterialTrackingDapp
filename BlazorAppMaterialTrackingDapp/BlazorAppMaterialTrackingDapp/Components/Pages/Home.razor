@page "/"
@inject IJSRuntime JS

<PageTitle>Material</PageTitle>

<div class="connect-btn">
    <h2>Connect Account</h2>
    <radix-connect-button />
</div>
<div class="flex">
    <p>Account Name:</p>
    <pre id="accountName">None connected</pre>
</div>
<div class="flex">
    <p>Account Address:</p>
    <pre id="accountAddress">None connected</pre>
</div>

<br/>
<hr/>

<h2>Instantiate Component</h2>

<div class="flex">
    <input type="text" placeholder="package address" id="packageAddress" />
    <input type="text" placeholder="gumball price" id="gumballPrice" value="7.6"/>
    <button id="instantiateComponent">Instantiate Component</button>
</div>
<div class="flex">
    <p>component address:</p>
    <pre id="componentAddress">None</pre>
</div>
<div class="flex">
    <p>Owner Badge address:</p>
    <pre id="ownerBadgeAddress">None</pre>
</div>
<div class="flex">
    <p>Gumball resource address:</p>
    <pre id="gumballResourceAddress">None</pre>
</div>

<br/>
<hr/>

<h2>Public Method</h2>
<div class="flex">
    <p>Price:<br/></p>
    <pre id="price">None</pre>
</div>
<button id="buyGumball">Buy 1 GUM</button>

<br/>
<hr/>

<h2>Owner Restricted methods</h2>
<div class="flex">
    <input type="text" placeholder="New Price" id="newPrice" />
    <button id="setPrice">Set Price</button>
</div>
<br/>

<button id="refill">Refill Gumballs</button>
<div class="flex">
    <p>gumballs in machine:<br/></p>
    <pre id="numOfGumballs">None</pre>
</div>

<button id="withdrawEarnings">Withdraw Earnings</button>
<div class="flex">
    <p>Earnings:<br/></p>
    <pre id="earnings">None</pre>
</div>

<br/>

@code {
    private IJSObjectReference? module;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            module = await JS.InvokeAsync<IJSObjectReference>("import",
                    "/js/app.js");
        }
    }

    
}